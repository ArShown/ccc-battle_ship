window.__require=function t(n,i,r){function e(a,s){if(!i[a]){if(!n[a]){var c=a.split("/");if(c=c[c.length-1],!n[c]){var h="function"==typeof __require&&__require;if(!s&&h)return h(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+a+"'")}}var u=i[a]={exports:{}};n[a][0].call(u.exports,function(t){return e(n[a][1][t]||t)},u,u.exports,t,n,i,r)}return i[a].exports}for(var o="function"==typeof __require&&__require,a=0;a<r.length;a++)e(r[a]);return e}({board:[function(t,n,i){"use strict";cc._RF.push(n,"0f844G6mTVJebXtm2ORwxQE","board");var r=function(){function t(t,n){var i=[],r=!0,e=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(i.push(a.value),!n||i.length!==n);r=!0);}catch(t){e=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(e)throw o}}return i}return function(n,i){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();cc.Class({extends:cc.Component,properties:{tokens:cc.SpriteFrame,shipPreFab:cc.Prefab},isGridActived:function(t,n){return this.gridBox[t][n].params.isActived},gridMouseEnterStyle:function(t,n){var i=this.gridBox[t][n].getComponent(cc.Graphics);i.clear(),i.fillColor=new cc.Color(255,255,255,100),i.fillRect(0,0,this.gridSize,this.gridSize),i.enabled=!0},gridMouseLeaveStyle:function(t,n){var i=this.gridBox[t][n].getComponent(cc.Graphics);i.clear(),i.enabled=!1},spawnGrid:function(t,n){var i=new cc.Node("Grid_"+t+"_"+n);return i.addComponent(cc.Graphics).enabled=!1,i.addComponent(cc.Sprite).enabled=!1,i.params={ship:null,isActived:!1,status:null},i.x=n*this.gridSize,i.y=t*this.gridSize,i.width=i.height=this.gridSize,i.zIndex=2,i.parent=this.node,i},spawnBoard:function(){for(var t=0;t<10;t++){for(var n=[],i=0;i<10;i++)n[i]=this.spawnGrid(t,i);this.gridBox[t]=n}},spawnShip:function(t){var n=this,i=cc.instantiate(this.shipPreFab),e=i.getComponent("ship");e.spawnShip(t);(function t(){e.getLocation(),e.location.some(function(t){var i=r(t,2),e=i[0],o=i[1];return n.gridBox[e][o].params.ship})&&t()})(),e.setPosition(e.origin.col*this.gridSize,e.origin.row*this.gridSize),e.location.forEach(function(t){var i=r(t,2),o=i[0],a=i[1];n.gridBox[o][a].params.ship=e}),this.node.addChild(i),this.shipBox.push(i)},startHandler:function(){this.enabled=!0,this.spawnBoard(),this.spawnShip("A"),this.spawnShip("B"),this.spawnShip("C"),this.spawnShip("S"),this.spawnShip("P"),this.node.on(cc.Node.EventType.MOUSE_ENTER,this.mouseEnterHandler,this),this.node.on(cc.Node.EventType.MOUSE_MOVE,this.mouseMoveHandler,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.mouseLeaveHandler,this),this.node.on(cc.Node.EventType.MOUSE_DOWN,this.mouseDownHandler,this),this.node.on("touchend",this.mouseDownHandler,this)},getCurrentLocation:function(t,n){return[parseInt((t-this._startY)/this.gridSize),parseInt((n-this._startX)/this.gridSize)]},mouseEnterHandler:function(t){var n=t.getLocation(),i=n.x,e=n.y,o=this.getCurrentLocation(e,i),a=r(o,2);this._prevGridRow=a[0],this._prevGridCol=a[1]},mouseMoveHandler:function(t){var n=t.getLocation(),i=n.x,e=n.y,o=this.getCurrentLocation(e,i),a=r(o,2),s=a[0],c=a[1];this.isGridActived(s,c)||this.gridMouseEnterStyle(s,c),this._prevGridRow===s&&this._prevGridCol===c||(this.gridMouseLeaveStyle(this._prevGridRow,this._prevGridCol),this._prevGridRow=s,this._prevGridCol=c)},mouseLeaveHandler:function(){if(this.isGridActived(this._prevGridRow,this._prevGridCol))return!1;this.gridMouseLeaveStyle(this._prevGridRow,this._prevGridCol)},mouseDownHandler:function(t){var n=this,i=t.getLocation(),e=i.x,o=i.y,a=this.getCurrentLocation(o,e),s=r(a,2),c=s[0],h=s[1];if(this.isGridActived(c,h))return!1;this.gridMouseLeaveStyle(c,h);var u=this.gridBox[c][h],l=u.params.ship,d=null!==l,m=u.getComponent(cc.Sprite);m.node.anchorX=m.node.anchorY=0,m.sizeMode=0,m.spriteFrame=d?this.hitSpriteFrame:this.missSpriteFrame,m.enabled=!0,u.params.isActived=!0,u.params.status=d?"hit":"miss",d&&!l.location.some(function(t){var i=r(t,2),e=i[0],o=i[1];return!n.gridBox[e][o].params.isActived})&&l.setShootDown()},onLoad:function(){this.enabled=!1,this.gridSize=50,this.node.width=this.node.height=500,this.gridBox=new Array(10).fill(new Array(10).fill(null)),this.shipBox=[],this._startX=95.5,this._startY=205,this._prevGridRow=null,this._prevGridCol=null,this.missSpriteFrame=this.tokens.clone(),this.missSpriteFrame.setRect(new cc.rect(32,0,32,32)),this.hitSpriteFrame=this.tokens.clone(),this.hitSpriteFrame.setRect(new cc.rect(64,0,32,32))},start:function(){},onDestroy:function(){this.node.off(cc.Node.EventType.MOUSE_ENTER,this.mouseEnterHandler,this),this.node.off(cc.Node.EventType.MOUSE_MOVE,this.mouseMoveHandler,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.mouseLeaveHandler,this),this.node.off(cc.Node.EventType.MOUSE_DOWN,this.mouseDownHandler,this),this.node.off("touchend",this.mouseDownHandler,this)}}),cc._RF.pop()},{}],game:[function(t,n,i){"use strict";cc._RF.push(n,"69029jbr/dHXZ/UkTooxQDU","game"),cc.Class({extends:cc.Component,properties:{board:cc.Node},onLoad:function(){},start:function(){this.board.getComponent("board").startHandler()}}),cc._RF.pop()},{}],ship:[function(t,n,i){"use strict";function r(t){if(Array.isArray(t)){for(var n=0,i=Array(t.length);n<t.length;n++)i[n]=t[n];return i}return Array.from(t)}cc._RF.push(n,"340e5t3ThFLlYB9Wb1MFLAO","ship"),cc.Class({extends:cc.Component,getShipMeta:function(t,n){return{A:{down:{w:50,h:250,rect:[150,0,32,156],minRow:0,minCol:0,maxRow:5,maxCol:9,body:function(t,n){return new Array(5).fill(t).map(function(t,i){return[t+i,n]})}},left:{w:250,h:50,rect:[244,368,156,32],minRow:0,minCol:0,maxRow:9,maxCol:5,body:function(t,n){return new Array(5).fill(n).map(function(n,i){return[t,n+i]})}},up:{w:50,h:250,rect:[150,244,32,156],minRow:0,minCol:0,maxRow:5,maxCol:9,body:function(t,n){return new Array(5).fill(t).map(function(t,i){return[t+i,n]})}},right:{w:250,h:50,rect:[244,0,156,32],minRow:0,minCol:0,maxRow:9,maxCol:5,body:function(t,n){return new Array(5).fill(n).map(function(n,i){return[t,n+i]})}}},B:{down:{w:50,h:200,rect:[112,0,32,125],minRow:0,minCol:0,maxRow:6,maxCol:9,body:function(t,n){return new Array(4).fill(t).map(function(t,i){return[t+i,n]})}},left:{w:200,h:50,rect:[244,330,125,32],minRow:0,minCol:0,maxRow:9,maxCol:6,body:function(t,n){return new Array(4).fill(n).map(function(n,i){return[t,n+i]})}},up:{w:50,h:200,rect:[112,275,32,125],minRow:0,minCol:0,maxRow:6,maxCol:9,body:function(t,n){return new Array(4).fill(t).map(function(t,i){return[t+i,n]})}},right:{w:200,h:50,rect:[275,38,125,32],minRow:0,minCol:0,maxRow:9,maxCol:6,body:function(t,n){return new Array(4).fill(n).map(function(n,i){return[t,n+i]})}}},C:{down:{w:50,h:150,rect:[75,0,32,94],minRow:0,minCol:0,maxRow:7,maxCol:9,body:function(t,n){return new Array(3).fill(t).map(function(t,i){return[t+i,n]})}},left:{w:150,h:50,rect:[244,293,94,32],minRow:0,minCol:0,maxRow:9,maxCol:7,body:function(t,n){return new Array(3).fill(n).map(function(n,i){return[t,n+i]})}},up:{w:50,h:150,rect:[75,306,32,94],minRow:0,minCol:0,maxRow:7,maxCol:9,body:function(t,n){return new Array(3).fill(t).map(function(t,i){return[t+i,n]})}},right:{w:150,h:50,rect:[306,75,94,32],minRow:0,minCol:0,maxRow:9,maxCol:7,body:function(t,n){return new Array(3).fill(n).map(function(n,i){return[t,n+i]})}}},S:{down:{w:50,h:150,rect:[38,0,32,94],minRow:0,minCol:0,maxRow:7,maxCol:9,body:function(t,n){return new Array(3).fill(t).map(function(t,i){return[t+i,n]})}},left:{w:150,h:50,rect:[244,256,94,32],minRow:0,minCol:0,maxRow:9,maxCol:7,body:function(t,n){return new Array(3).fill(n).map(function(n,i){return[t,n+i]})}},up:{w:50,h:150,rect:[38,306,32,94],minRow:0,minCol:0,maxRow:7,maxCol:9,body:function(t,n){return new Array(3).fill(t).map(function(t,i){return[t+i,n]})}},right:{w:150,h:50,rect:[306,112,94,32],minRow:0,minCol:0,maxRow:9,maxCol:7,body:function(t,n){return new Array(3).fill(n).map(function(n,i){return[t,n+i]})}}},P:{down:{w:50,h:100,rect:[0,0,32,63],minRow:0,minCol:0,maxRow:8,maxCol:9,body:function(t,n){return new Array(2).fill(t).map(function(t,i){return[t+i,n]})}},left:{w:100,h:50,rect:[244,218,63,32],minRow:0,minCol:0,maxRow:9,maxCol:8,body:function(t,n){return new Array(2).fill(n).map(function(n,i){return[t,n+i]})}},up:{w:50,h:100,rect:[0,337,32,63],minRow:0,minCol:0,maxRow:8,maxCol:9,body:function(t,n){return new Array(2).fill(t).map(function(t,i){return[t+i,n]})}},right:{w:100,h:50,rect:[337,150,63,32],minRow:0,minCol:0,maxRow:9,maxCol:8,body:function(t,n){return new Array(2).fill(n).map(function(n,i){return[t,n+i]})}}}}[t][n]},getDirection:function(){return["up","down","left","right"][parseInt(4*Math.random())]},getLocation:function(){var t=this.getShipMeta(this.type,this.direction),n=t.minRow,i=t.minCol,r=t.maxRow,e=t.maxCol,o=t.body,a=parseInt(Math.random()*(r-n+1))+n,s=parseInt(Math.random()*(e-i+1))+i;this.origin={row:a,col:s},this.location=o(a,s)},setPosition:function(t,n){this.node.x=t,this.node.y=n},spawnShip:function(t){this.direction=this.getDirection(),this.type=t;var n=this.getShipMeta(this.type,this.direction);this.node.width=n.w,this.node.height=n.h;var i=this.node.getComponent(cc.Sprite);i.sizeMode=0;var e=i.spriteFrame.clone();e.setRect(new(Function.prototype.bind.apply(cc.rect,[null].concat(r(n.rect))))),i.spriteFrame=e},setShootDown:function(){this.node.color=new cc.Color(255,0,0)},onLoad:function(){this.node.zIndex=1,this.node.opacity=200},start:function(){}}),cc._RF.pop()},{}]},{},["board","game","ship"]);